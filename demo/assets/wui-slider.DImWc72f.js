import{d as e,r as a,v as l,q as u,m as s,o as t,c as i,w as n,n as d,f as v,t as o,p as r,e as c,y as m,i as w,L as h}from"./index-Fj9ozFXB.js";import{f as b,i as f,l as _,m as p,I as y,J as g,r as M,K as x,t as V,b as $}from"./page-wraper.D4oaE4iN.js";import{u as C}from"./useTouch.BQUFjmn2.js";const T=$(e({name:"wui-slider",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...b,customMinClass:f(""),customMaxClass:f(""),hideMinMax:_(!1),hideLabel:_(!1),disabled:_(!1),inactiveColor:f("#e5e5e5"),activeColor:f(""),max:p(100),min:p(0),step:p(1),modelValue:{type:[Number,Array],default:0}},emits:["dragstart","dragmove","dragend","update:modelValue"],setup(e,{expose:b,emit:f}){const _=e,p=f,$={startValue:0,deltaX:0,newValue:0},T=a(`sliderId${y()}`),k=C(),L=C(),I=a(!1),N=a(""),S=a(0),j=a(0),X=a(0),q=a(0),A=a(0),E=a(0),G=a(0),H=a(0),J=a(0),K=a(100),O=a(0),z=a(1);l((()=>_.max),(e=>{e<=_.min?(K.value=_.min,O.value=e,console.warn("[wui design] warning(wui-slider): max value must be greater than min value")):K.value=e,de()}),{immediate:!0}),l((()=>_.min),(e=>{e>=_.max?(O.value=_.max,K.value=e,console.warn("[wui design] warning(wui-slider): min value must be less than max value")):O.value=e,de()}),{immediate:!0}),l((()=>_.step),(e=>{e<1?(z.value=1,console.warn("[wui design] warning(wui-slider): step must be greater than 0")):z.value=Math.floor(e)}),{immediate:!0}),l((()=>_.modelValue),(e=>{if(null==e?(p("update:modelValue",H.value),console.warn("[wui design] warning(wui-slider): value can nott be null or undefined")):M(e)&&2!==e.length?console.warn("[wui design] warning(wui-slider): value must be dyadic array"):x(e)||M(e)||(p("update:modelValue",H.value),console.warn("[wui design] warning(wui-slider): value must be dyadic array Or Number")),M(e)){if(H.value&&M(H.value)&&function(e,a){if(!V(e)||!V(a))return!1;let l=0;return e.forEach(((e,u)=>{e===a[u]&&l++})),2===l}(e,H.value))return;H.value=e,I.value=!0,q.value<=X.value?(se(e[0]),ue(e[1])):(se(e[1]),ue(e[0]))}else{if(e===H.value)return;H.value=e,se(e)}}),{deep:!0,immediate:!0});const{proxy:B}=h(),D=u((()=>`wui-slider ${_.hideLabel?"":"wui-slider__has-label"} ${_.disabled?"wui-slider--disabled":""} ${_.customClass}`)),F=u((()=>""+(_.inactiveColor?"background:"+_.inactiveColor:""))),P=u((()=>`${N.value};${_.activeColor?"background:"+_.activeColor:""}`)),Q=u((()=>`left: ${q.value}%; visibility: ${_.disabled?"hidden":"show"};`)),R=u((()=>`left: ${X.value}%; visibility: ${_.disabled?"hidden":"show"}`));function U(){g(`#${T.value}`,!1,B).then((e=>{A.value=Number(e.width),E.value=Number(e.left)}))}function W(e){const{disabled:a,modelValue:l}=_;a||(k.touchStart(e),G.value=M(l)?q.value<X.value?ie(l[0]):ie(l[1]):ie(l),p("dragstart",{value:H.value}))}function Y(e){const{disabled:a}=_;if(a)return;k.touchMove(e);const l=k.deltaX.value/A.value*(K.value-O.value);J.value=G.value+l,se(J.value),p("dragmove",{value:H.value})}function Z(){_.disabled||p("dragend",{value:H.value})}function ee(e){if(_.disabled)return;const{modelValue:a}=_;L.touchStart(e),$.startValue=q.value<X.value?ie(a[1]):ie(a[0]),p("dragstart",{value:H.value})}function ae(e){if(_.disabled)return;L.touchMove(e);const a=L.deltaX.value/A.value*(K.value-O.value);$.newValue=ie($.startValue+a),ue($.newValue),p("dragmove",{value:H.value})}function le(){_.disabled||p("dragend",{value:H.value})}function ue(e){e=ie(e),j.value=e,p("update:modelValue",[Math.min(S.value,j.value),Math.max(S.value,j.value)]),X.value=ne(e),te()}function se(e){const a=ne(e=ie(e));I.value?(S.value=e,q.value=a,p("update:modelValue",[Math.min(S.value,j.value),Math.max(S.value,j.value)]),te()):(p("update:modelValue",e),S.value=e,q.value=a,N.value=`width: ${a}%; `)}function te(){const e=q.value<X.value?[q.value,X.value]:[X.value,q.value],a=`width: ${e[1]-e[0]}%;  left: ${e[0]}%`;H.value=S.value<j.value?[S.value,j.value]:[j.value,S.value],N.value=a}function ie(e){return Math.round(Math.max(O.value,Math.min(e,K.value))/z.value)*z.value}function ne(e){return(e-O.value)/(K.value-O.value)*100}function de(){const{modelValue:e}=_;let a=M(e)?q.value<X.value?ie(e[0]):ie(e[1]):ie(e);a=ie(a);const l=ne(a);q.value=l,N.value=`width: ${l}%; `}return s((()=>{U()})),b({initSlider:U}),(e,a)=>{const l=w;return t(),i(l,{class:d(D.value),style:m(e.customStyle),id:T.value},{default:n((()=>[e.hideMinMax?r("",!0):(t(),i(l,{key:0,class:d(`wui-slider__label-min ${e.customMinClass}`)},{default:n((()=>[v(o(O.value),1)])),_:1},8,["class"])),c(l,{class:"wui-slider__bar-wrapper",style:m(F.value)},{default:n((()=>[c(l,{class:"wui-slider__bar",style:m(P.value)},null,8,["style"]),c(l,{class:"wui-slider__button-wrapper",style:m(Q.value),onTouchstart:W,onTouchmove:Y,onTouchend:Z,onTouchcancel:Z},{default:n((()=>[e.hideLabel?r("",!0):(t(),i(l,{key:0,class:"wui-slider__label"},{default:n((()=>[v(o(S.value),1)])),_:1})),c(l,{class:"wui-slider__button"})])),_:1},8,["style"]),I.value?(t(),i(l,{key:0,class:"wui-slider__button-wrapper",style:m(R.value),onTouchstart:ee,onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:n((()=>[e.hideLabel?r("",!0):(t(),i(l,{key:0,class:"wui-slider__label"},{default:n((()=>[v(o(j.value),1)])),_:1})),c(l,{class:"wui-slider__button"})])),_:1},8,["style"])):r("",!0)])),_:1},8,["style"]),e.hideMinMax?r("",!0):(t(),i(l,{key:1,class:d(`wui-slider__label-max ${e.customMaxClass}`)},{default:n((()=>[v(o(K.value),1)])),_:1},8,["class"]))])),_:1},8,["class","style","id"])}}}),[["__scopeId","data-v-5981cb2e"]]);export{T as _};
