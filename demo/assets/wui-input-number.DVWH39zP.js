import{d as e,r as i,v as a,o as t,c as u,w as s,e as n,n as l,V as o,y as d,p as r,i as c,_ as p}from"./index-Fj9ozFXB.js";import{f as m,z as b,F as f,m as v,l as w,y as _,i as h,w as N,R as y,t as x,S as M,b as I}from"./page-wraper.D4oaE4iN.js";const V=I(e({name:"wui-input-number",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...m,modelValue:b(f),min:v(1),max:v(Number.MAX_SAFE_INTEGER),step:v(1),stepStrictly:w(!1),precision:v(0),disabled:w(!1),disableInput:w(!1),disableMinus:w(!1),disablePlus:w(!1),withoutInput:w(!1),inputWidth:_(36),allowNull:w(!1),placeholder:h(""),adjustPosition:w(!0)},emits:["focus","blur","change","update:modelValue"],setup(e,{emit:m}){const b=e,f=m,v=i(!1),w=i(!1),_=i("");function h(e){const{disabled:i,min:a,max:t,step:u}=b;v.value=i||Number(e)<=a||g(e,-u)<a,w.value=i||Number(e)>=t||g(e,u)>t}function I(e){return Number(parseFloat(""+Math.round(e*Math.pow(10,b.precision))/Math.pow(10,b.precision)).toFixed(b.precision))}function V(e){const i=function(e){if(void 0===e)return 0;const i=e.toString(),a=i.indexOf(".");let t=0;return-1!==a&&(t=i.length-a-1),t}(b.step),a=Math.pow(10,i);return Math.round(Number(e)/b.step)*a*b.step/a}function S(e,i=!0){!b.allowNull||x(e)&&""!==e?(b.stepStrictly&&(e=V(e)),!e&&0!==e||void 0===b.precision||(e=I(Number(e))),Number(e)>b.max&&(e=I(b.max)),Number(e)<b.min&&(e=I(b.min)),E(e,i)):E(e,i)}function g(e,i){if(e=Number(e),isNaN(e))return b.min;const a=Math.pow(10,b.precision);return I((e*a+i*a)/a)}function j(){if(v.value||b.disableMinus)return;E(g(_.value,-b.step))}function F(){if(w.value||b.disablePlus)return;E(g(_.value,b.step))}function C(e){E(e.detail.value||"")}function P(e){f("focus",e.detail)}function k(){const e=W(_.value);y(_.value,e)||S(e),f("blur",{value:e})}function E(e,i=!0){y(_.value,e)||(_.value=e,i&&f("update:modelValue",_.value),i&&f("change",{value:e}))}function W(e){if(b.allowNull&&(!x(e)||""===e))return"";let i=Number(e);return isNaN(i)&&(e=b.min),b.stepStrictly&&(i=V(e)),void 0!==b.precision&&(i=Number(i.toFixed(b.precision))),i>b.max&&(i=b.max),i<b.min&&(i=b.min),i}return a((()=>b.modelValue),(e=>{_.value=e,h(e)}),{immediate:!0,deep:!0}),a([()=>b.max,()=>b.min],(()=>{M((()=>{const e=W(_.value);y(_.value,e)||S(e),h(e)}),30)()}),{immediate:!0,deep:!0}),a((()=>b.disabled),(e=>{v.value=e,w.value=e}),{immediate:!0,deep:!0}),(e,i)=>{const a=c,m=p;return t(),u(a,{class:l(`wui-input-number ${e.customClass} ${e.disabled?"is-disabled":""} ${e.withoutInput?"is-without-input":""}`),style:d(e.customStyle)},{default:s((()=>[n(a,{class:l("wui-input-number__action "+(v.value||e.disableMinus?"is-disabled":"")),onClick:j},{default:s((()=>[n(N,{name:"decrease","custom-class":"wui-input-number__action-icon"})])),_:1},8,["class"]),e.withoutInput?r("",!0):(t(),u(a,{key:0,class:"wui-input-number__inner",onClick:i[1]||(i[1]=o((()=>{}),["stop"]))},{default:s((()=>[n(m,{class:"wui-input-number__input",style:d(""+(e.inputWidth?"width: "+e.inputWidth:"")),type:"digit",disabled:e.disabled||e.disableInput,modelValue:_.value,"onUpdate:modelValue":i[0]||(i[0]=e=>_.value=e),placeholder:e.placeholder,"adjust-position":e.adjustPosition,onInput:C,onFocus:P,onBlur:k},null,8,["style","disabled","modelValue","placeholder","adjust-position"]),n(a,{class:"wui-input-number__input-border"})])),_:1})),n(a,{class:l("wui-input-number__action "+(w.value||e.disablePlus?"is-disabled":"")),onClick:F},{default:s((()=>[n(N,{name:"add","custom-class":"wui-input-number__action-icon"})])),_:1},8,["class"])])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-b437ef60"]]);export{V as _};
