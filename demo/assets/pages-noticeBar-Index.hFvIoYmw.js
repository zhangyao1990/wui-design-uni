import{d as e,r as t,q as a,X as l,v as n,m as i,a8 as o,T as s,a9 as r,o as u,c,w as d,x as f,e as p,y as v,g as x,F as y,h as w,f as b,t as _,p as m,n as h,i as g,L as k,a as $,b as C,aa as D}from"./index-Fj9ozFXB.js";import{f as T,i as j,l as S,m as F,w as I,o as P,t as z,r as A,J as X,b as q,a as G}from"./page-wraper.D4oaE4iN.js";import{_ as H}from"./demo-block.e8_LucGp.js";import{_ as J}from"./wui-button.CIriDmop.js";const L=q(e({name:"wui-notice-bar",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...T,text:{type:[String,Array],default:""},type:j("warning"),scrollable:S(!0),delay:F(1),speed:F(50),closable:S(!1),wrapable:S(!1),prefix:String,color:String,backgroundColor:String,direction:j("horizontal")},emits:["close","next","click"],setup(e,{expose:$,emit:C}){const D=e,T=C,j=t(0),S=t(!0),F=t(0),q=a((()=>Array.isArray(D.text)?D.text:[D.text])),G=a((()=>q.value[F.value])),H=t(0),J=t(null),L=t(null),N=a((()=>"horizontal"===D.direction)),V=a((()=>"vertical"===D.direction)),Y=l({transitionProperty:"unset",transitionDelay:"unset",transitionDuration:"unset",transform:"none",transitionTimingFunction:"linear"}),B=a((()=>P(Y))),E=a((()=>{const e={};return z(D.color)&&(e.color=D.color),z(D.backgroundColor)&&(e.background=D.backgroundColor),`${P(e)};${D.customStyle}`})),K=a((()=>{const{type:e,wrapable:t,scrollable:a}=D;let l=[];return e&&l.push(`is-${e}`),N.value?!t&&!a&&l.push("wui-notice-bar--ellipse"):l.push("wui-notice-bar--ellipse"),t&&!a&&l.push("wui-notice-bar--wrap"),l.join(" ")})),{proxy:M}=k();function O(){R(),Q()}function Q(){r((()=>async function(){const[e,t]=await Z();if(!e.width||!t.width||!t.height)return;J.value=e,L.value=t,j.value=e.width,N.value?D.scrollable&&W({duration:t.width/D.speed,delay:D.delay,translate:-t.width}):q.value.length>1&&ee(t.height)}()))}function R(){Y.transitionProperty="unset",Y.transitionDelay="unset",Y.transitionDuration="unset",Y.transform="none",Y.transitionTimingFunction="linear",F.value=0,H.value=0}function U(){S.value=!1,T("close")}function W({duration:e,delay:t,translate:a}){Y.transitionProperty="all",Y.transitionDelay=`${t}s`,Y.transitionDuration=`${e}s`,Y.transform=`${"vertical"===D.direction?"translateY":"translateX"}(${a}px)`,Y.transitionTimingFunction="linear"}function Z(){return Promise.all([X(".wui-notice-bar__wrap",!1,M),X(".wui-notice-bar__content",!1,M)])}async function ee(e){const t=-e/(q.value.length+1)*(F.value+1);W({duration:e/(q.value.length+1)/D.speed,delay:D.delay,translate:t})}function te(){N.value?W({duration:0,delay:0,translate:j.value+1}):++H.value>=q.value.length&&(H.value=0,W({duration:0,delay:0,translate:0}));const e=setTimeout((()=>{F.value>=q.value.length-1?F.value=0:F.value++,T("next",F.value),r((async()=>{try{const[e,t]=await Z();J.value=e,L.value=t,j.value=e.width||0}catch(e){}L.value&&L.value.width&&L.value.height&&(N.value?W({duration:(j.value+L.value.width)/D.speed,delay:D.delay,translate:-L.value.width}):ee(L.value.height))})),clearTimeout(e)}),20)}function ae(){const e=A(D.text)?{index:F.value,text:D.text[F.value]}:{index:0,text:D.text};T("click",e)}return n((()=>D.text),(()=>{O()}),{deep:!0}),i((()=>{Q()})),o((()=>{Q()})),s((()=>{R()})),$({reset:O}),(e,t)=>{const a=g;return S.value?(u(),c(a,{key:0,class:h(`wui-notice-bar ${e.customClass} ${K.value}`),style:v(E.value)},{default:d((()=>[e.prefix?(u(),c(I,{key:0,"custom-class":"wui-notice-bar__prefix",name:e.prefix},null,8,["name"])):f(e.$slots,"prefix",{key:1},void 0,!0),p(a,{class:"wui-notice-bar__wrap"},{default:d((()=>[p(a,{class:"wui-notice-bar__content",style:v(B.value),onTransitionend:te,onClick:ae},{default:d((()=>[V.value?(u(),x(y,{key:0},[(u(!0),x(y,null,w(q.value,(e=>(u(),c(a,{key:e},{default:d((()=>[b(_(e),1)])),_:2},1024)))),128)),q.value.length>1?(u(),c(a,{key:0},{default:d((()=>[b(_(q.value[0]),1)])),_:1})):m("",!0)],64)):f(e.$slots,"default",{key:1},(()=>[b(_(G.value),1)]),!0)])),_:3},8,["style"])])),_:3}),e.closable?(u(),c(I,{key:2,"custom-class":"wui-notice-bar__suffix",name:"close-bold",onClick:U})):f(e.$slots,"suffix",{key:3},void 0,!0)])),_:3},8,["class","style"])):m("",!0)}}}),[["__scopeId","data-v-e4a2fda7"]]),N=q(e({__name:"Index",setup(e){const a=t();function l(){var e;null==(e=a.value)||e.reset()}const n=t(["欢迎使用wui design uni","该组件库基于uniapp ->Vue3, ts构建","项目地址：https://github.com/zhangyao1990/wui-design-uni","我们的目标是打造最强uniapp组件库","诚挚邀请大家共同建设","这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息"]),i=e=>{console.log("展示下一条，index: ",e),console.log("文本是："+n.value[e])};function o(e){console.log(e)}return(e,t)=>{const s=$(C("wui-notice-bar"),L),r=$(C("demo-block"),H),f=$(C("wui-icon"),I),v=$(C("wui-button"),J),x=g,y=$(C("page-wraper"),G);return u(),c(y,null,{default:d((()=>[p(x,null,{default:d((()=>[p(r,{title:"基本用法"},{default:d((()=>[p(s,{text:"这是一条消息提示信息这是一条消息提示信息这是一条消息提示信息",prefix:"warn-bold"})])),_:1}),p(r,{title:"类型修改"},{default:d((()=>[p(s,{type:"danger",text:"当前网络不可用，请检查你的网络设置。当前网络不可用，请检查你的网络设置。",prefix:"wifi-error","custom-class":"space"}),p(s,{type:"info",text:"pc-win沃特已登录，可在“设备管理”中查看详情。pc-win沃特已登录，可在“设备管理”中查看详情。",prefix:"check-outline"})])),_:1}),p(r,{title:"禁止滚动"},{default:d((()=>[p(s,{scrollable:!1,text:"通知被禁或时段内消息屏蔽可能造成消…",prefix:"warn-bold"})])),_:1}),p(r,{title:"插槽"},{default:d((()=>[p(s,{scrollable:!1},{prefix:d((()=>[p(f,{"custom-class":"prefix",name:"warn-bold"},{default:d((()=>[b("占位符")])),_:1})])),suffix:d((()=>[D("div",{style:{color:"#4d80f0"}},"查看")])),default:d((()=>[b(" 通知被禁或时段内消息屏蔽可能造成消… ")])),_:1})])),_:1}),p(r,{title:"可关闭的"},{default:d((()=>[p(s,{text:"挂起后，电脑与手机均不会有新客户接入。挂起后，电脑与手机均不会有新客户接入。",closable:"",prefix:"warn-bold"})])),_:1}),p(r,{title:"多行展示"},{default:d((()=>[p(s,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",wrapable:"",scrollable:!1})])),_:1}),p(r,{title:"自定义颜色"},{default:d((()=>[p(s,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",prefix:"check-outline",color:"#34D19D","background-color":"#f0f9eb"})])),_:1}),p(r,{title:"多文本轮播"},{default:d((()=>[p(s,{onClick:o,text:n.value,prefix:"check-outline",onNext:i},null,8,["text"])])),_:1}),p(r,{title:"垂直滚动"},{default:d((()=>[p(s,{onClick:o,prefix:"warn-bold",direction:"vertical",text:n.value,delay:3,"custom-class":"space"},null,8,["text"]),p(s,{onClick:o,prefix:"warn-bold",direction:"vertical",text:"只有一条消息不会滚动",delay:3,"custom-class":"space"})])),_:1}),p(r,{title:"重置播放动画"},{default:d((()=>[p(s,{ref_key:"notice",ref:a,prefix:"warn-bold",direction:"vertical",text:n.value,delay:3,"custom-class":"space"},null,8,["text"]),p(v,{onClick:l},{default:d((()=>[b("重置播放动画")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-b398daf7"]]);export{N as default};
