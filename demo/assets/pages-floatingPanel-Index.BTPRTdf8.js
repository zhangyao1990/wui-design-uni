import{d as a,r as e,q as t,v as s,S as l,H as o,o as n,c as u,w as r,e as i,n as c,x as h,V as d,y as v,i as m,a6 as f,D as g,a as p,b as _,g as w,F as b,h as x,f as y,t as j,u as I}from"./index-Fj9ozFXB.js";import{f as T,m as $,N as H,l as M,ad as S,y as A,h as B,o as C,ae as D,b as V,c as F,d as P,_ as U,a as Y}from"./page-wraper.D4oaE4iN.js";import{_ as k}from"./wui-cell-group.CkmAaoI5.js";import{u as z}from"./useTouch.BQUFjmn2.js";import{_ as G,a as J}from"./wui-tabs.BdQBx6rl.js";import"./useChildren.CNqwIpWf.js";import"./wui-sticky-box.80Vveh1P.js";import"./wui-resize.BoPAPGnY.js";import"./useTranslate.DD004H4V.js";const K=V(a({name:"wui-floating-panel",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...T,height:$(0),anchors:H(),safeAreaInsetBottom:M(!1),showScrollbar:S,duration:A(300),contentDraggable:S},emits:["update:height","height-change"],setup(a,{emit:g}){const p=z(),_=a,w=g;let b;const x=e(_.height),y=e(0),j=e(!1),I=t((()=>({min:_.anchors[0]?_.anchors[0]:100,max:_.anchors[_.anchors.length-1]?_.anchors[_.anchors.length-1]:Math.round(.6*y.value)}))),T=t((()=>_.anchors.length>=2?_.anchors:[I.value.min,I.value.max])),$=t((()=>{const a={height:B(I.value.max),transform:`translateY(calc(100% + ${B(-x.value)}))`,transition:j.value?"none":`transform ${_.duration}ms cubic-bezier(0.18, 0.89, 0.32, 1.28)`};return`${C(a)};${_.customStyle}`})),H=a=>{p.touchStart(a),j.value=!0,b=-x.value},M=a=>{if("content"==a.currentTarget.dataset.id&&!_.contentDraggable)return;p.touchMove(a);const e=p.deltaY.value+b;x.value=-A(e)},S=()=>{j.value=!1,x.value=D(T.value,x.value),x.value!==-b&&w("height-change",{height:x.value})},A=a=>{const e=Math.abs(a),{min:t,max:s}=I.value;return e>s?-(s+.2*(e-s)):e<t?-(t-.2*(t-e)):a};return s((()=>x.value),(a=>{w("update:height",a)})),s(I,(()=>{x.value=D(T.value,x.value)}),{immediate:!0}),l((()=>{const{windowHeight:a}=o();y.value=a})),(a,e)=>{const t=m,s=f;return n(),u(t,{class:c(`wui-floating-panel ${a.customClass} ${a.safeAreaInsetBottom?"is-safe":""}`),style:v($.value),onTouchstartPassive:H,onTouchmovePassive:M,onTouchend:S,onTouchcancel:S},{default:r((()=>[i(t,{class:c("wui-floating-panel__header")},{default:r((()=>[i(t,{class:c("wui-floating-panel__header-bar")})])),_:1}),i(s,{class:c("wui-floating-panel__content"),"data-id":"content","show-scrollbar":a.showScrollbar,"scroll-y":"",onTouchmove:d(M,["stop","prevent"])},{default:r((()=>[h(a.$slots,"default",{},void 0,!0)])),_:3},8,["show-scrollbar"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-152432ed"]]),N=V(a({__name:"Index",setup(a){const{show:t}=F(),s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],l=e(0),u=e(0),c=e(0),h=e([]),d=({height:a})=>{t(B(a))};return g((()=>{c.value=o().windowHeight,h.value=[100,Math.round(.4*c.value),Math.round(.7*c.value)],u.value=h.value[1]})),(a,e)=>{const t=p(_("wui-toast"),P),o=p(_("wui-cell"),U),c=p(_("wui-cell-group"),k),v=p(_("wui-floating-panel"),K),f=p(_("wui-tab"),G),g=m,T=p(_("wui-tabs"),J),$=p(_("page-wraper"),Y);return n(),w(b,null,[i(t),i(g,{class:"floating-panel"},{default:r((()=>[i($,null,{default:r((()=>[i(T,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a)},{default:r((()=>[i(f,{title:"基础用法"},{default:r((()=>[i(v,{safeAreaInsetBottom:""},{default:r((()=>[i(c,{border:""},{default:r((()=>[(n(),w(b,null,x(s,(a=>i(o,{key:a,title:a},null,8,["title"]))),64))])),_:1})])),_:1})])),_:1}),i(f,{title:"自定义锚点"},{default:r((()=>[i(v,{height:u.value,"onUpdate:height":e[0]||(e[0]=a=>u.value=a),anchors:h.value,safeAreaInsetBottom:"",onHeightChange:d},{default:r((()=>[i(g,{class:"inner-content"},{default:r((()=>[y("自定义锚点 "+j(h.value.map(I(B)))+" - "+j(I(B)(u.value.toFixed(0))),1)])),_:1})])),_:1},8,["height","anchors"])])),_:1}),i(f,{title:"仅头部拖拽"},{default:r((()=>[i(v,{contentDraggable:!1},{default:r((()=>[i(g,{class:"inner-content"},{default:r((()=>[y("内容区不可以拖拽")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-04fbe2bb"]]);export{N as default};
