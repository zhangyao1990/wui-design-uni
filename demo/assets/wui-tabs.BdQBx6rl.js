import{d as a,r as e,q as s,v as t,o as l,c as i,w as n,y as o,x as u,p as d,n as c,i as r,L as m,X as b,m as _,a9 as p,e as v,g as f,h as w,F as y,f as h,t as x,u as g,a6 as k}from"./index-Fj9ozFXB.js";import{f as I,y as $,m as C,l as S,F as N,i as T,g as V,t as L,K as j,X,b as H,S as q,w as z,o as F,J as G,q as K,h as M}from"./page-wraper.D4oaE4iN.js";import{w as W,a as A}from"./wui-sticky-box.80Vveh1P.js";import{u as E}from"./useTouch.BQUFjmn2.js";import{u as J}from"./useChildren.CNqwIpWf.js";import{u as P}from"./useTranslate.DD004H4V.js";const R=Symbol("wui-tabs"),B={...I,modelValue:$(0),slidableNum:C(6),mapNum:C(10),sticky:S(!1),offsetTop:C(0),swipeable:S(!1),lineWidth:N,lineHeight:N,color:T(""),inactiveColor:T(""),animated:S(!1),duration:C(300)},D=H(a({name:"wui-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...I,name:N,title:String,disabled:S(!1)},setup(a,{expose:b}){const _=a,p=e(!1),v=e(!1),{proxy:f}=m(),{parent:w,index:y}=V(R),h=s((()=>L(w)?w.state.activeIndex:0));function x(a,e){p.value=a,v.value=e}return t((()=>_.name),(a=>{!L(a)||j(a)||X(a)?w&&function(a){const{name:e}=_;if(null==e||""===e)return;w&&w.children.forEach((s=>{s.$.uid!==a.$.uid&&s.name===e&&console.error(`The tab's bound value: ${e} has been used`)}))}(f):console.error("[wui design] error(wui-tab): the type of name should be number or string")}),{deep:!0,immediate:!0}),t((()=>h.value),(a=>{a===y.value?x(!0,!0):x(p.value,!1)}),{deep:!0,immediate:!0}),b({setShow:x,painted:p}),(a,e)=>{const s=r;return l(),i(s,{class:c(`wui-tab ${a.customClass}`),style:o(a.customStyle)},{default:n((()=>[p.value?(l(),i(s,{key:0,class:"wui-tab__body",style:o(v.value?"":"display: none;")},{default:n((()=>[u(a.$slots,"default",{},void 0,!0)])),_:3},8,["style"])):d("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-9d77769e"]]),O=H(a({name:"wui-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:B,emits:["change","disabled","click","update:modelValue"],setup(a,{expose:e,emit:I}){const $=".wui-tabs__nav-item",C=a,S=I,{translate:N}=P("tabs"),T=b({activeIndex:0,lineStyle:"display:none;",inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:V,linkChildren:H}=J(R);H({state:T});const{proxy:B}=m(),D=E(),O=s((()=>V.map(((a,e)=>({disabled:a.disabled,title:a.title,name:L(a.name)?a.name:e}))))),Q=s((()=>C.animated?F({left:-100*T.activeIndex+"%","transition-duration":C.duration+"ms","-webkit-transition-duration":C.duration+"ms"}):"")),U=q((function(a=0,e=!1,s=!0){0!==O.value.length&&(a=ia(a),O.value[a].disabled||(T.activeIndex=a,s&&(Z(!1===e),aa()),function(){if(!T.inited)return;O.value[T.activeIndex].name!==C.modelValue&&(S("change",{index:T.activeIndex,name:O.value[T.activeIndex].name}),S("update:modelValue",O.value[T.activeIndex].name))}()))}),100,{leading:!1});function Y(){T.mapShow?(T.animating=!1,setTimeout((()=>{T.mapShow=!1}),300)):(T.mapShow=!0,setTimeout((()=>{T.animating=!0}),100))}function Z(a=!0){if(!T.inited)return;const{lineWidth:e,lineHeight:s}=C;G($,!0,B).then((t=>{const l={};L(e)&&(l.width=M(e)),L(s)&&(l.height=M(s),l.borderRadius=`calc(${M(s)} / 2)`);const i=t[T.activeIndex];let n=t.slice(0,T.activeIndex).reduce(((a,e)=>a+Number(e.width)),0)+Number(i.width)/2;l.transform=`translateX(${n}px) translateX(-50%)`,a&&(l.transition="width 300ms ease, transform 300ms ease"),T.lineStyle=F(l)}))}function aa(){T.inited&&Promise.all([G($,!0,B),G(".wui-tabs__nav-container",!1,B)]).then((([a,e])=>{const s=a[T.activeIndex],t=a.slice(0,T.activeIndex).reduce(((a,e)=>a+e.width),0)-(e.width-Number(s.width))/2;t===T.scrollLeft?T.scrollLeft=t+Math.random()/1e4:T.scrollLeft=t}))}function ea(a){if(void 0===a)return;const{name:e,disabled:s}=O.value[a];s?S("disabled",{index:a,name:e}):(T.mapShow&&Y(),U(a),S("click",{index:a,name:e}))}function sa(a){C.swipeable&&D.touchStart(a)}function ta(a){C.swipeable&&D.touchMove(a)}function la(){if(!C.swipeable)return;const{direction:a,deltaX:e,offsetX:s}=D;"horizontal"===a.value&&s.value>=50&&(e.value>0&&0!==T.activeIndex?U(T.activeIndex-1):e.value<0&&T.activeIndex!==O.value.length-1&&(U(T.activeIndex+1),U(T.activeIndex+1)))}function ia(a){if(j(a)&&a>=O.value.length&&(console.error("[wui design] warning(wui-tabs): the type of tabs' value is Number shouldn't be less than its children"),a=0),X(a)){const e=O.value.findIndex((e=>e.name===a));a=-1===e?0:e}return a}return t((()=>C.modelValue),(a=>{j(a)||X(a)||console.error("[wui design] error(wui-tabs): the type of value should be number or string"),""!==a&&L(a)||console.error("[wui design] error(wui-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof a&&a<0&&console.error("[wui design] error(wui-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),t((()=>C.modelValue),(a=>{const e=ia(a);U(a,!1,e!==T.activeIndex)}),{immediate:!1,deep:!0}),t((()=>V.length),(()=>{T.inited&&p((()=>{U(C.modelValue)}))})),t((()=>C.slidableNum),(a=>{K(a,"slidableNum")})),t((()=>C.mapNum),(a=>{K(a,"mapNum")})),_((()=>{T.inited=!0,p((()=>{U(C.modelValue,!0)}))})),e({setActive:U,scrollIntoView:aa,updateLineStyle:Z}),(a,e)=>{const s=r,t=k;return a.sticky?(l(),i(A,{key:0},{default:n((()=>[v(s,{class:c(`wui-tabs ${a.customClass} ${a.slidableNum<O.value.length?"is-slide":""} ${a.mapNum<O.value.length&&0!==a.mapNum?"is-map":""}`),style:o(a.customStyle)},{default:n((()=>[v(W,{"offset-top":a.offsetTop},{default:n((()=>[v(s,{class:"wui-tabs__nav wui-tabs__nav--sticky"},{default:n((()=>[v(s,{class:"wui-tabs__nav--wrap"},{default:n((()=>[v(t,{"scroll-x":a.slidableNum<O.value.length,"scroll-with-animation":"","scroll-left":T.scrollLeft},{default:n((()=>[v(s,{class:"wui-tabs__nav-container"},{default:n((()=>[(l(!0),f(y,null,w(O.value,((e,t)=>(l(),i(s,{onClick:a=>ea(t),key:t,class:c(`wui-tabs__nav-item  ${T.activeIndex===t?"is-active":""} ${e.disabled?"is-disabled":""}`),style:o(T.activeIndex===t?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:n((()=>[h(x(e.title),1)])),_:2},1032,["onClick","class","style"])))),128)),v(s,{class:"wui-tabs__line",style:o(T.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<O.value.length&&0!==a.mapNum?(l(),i(s,{key:0,class:"wui-tabs__map"},{default:n((()=>[v(s,{class:c("wui-tabs__map-btn  "+(T.animating?"is-open":"")),onClick:Y},{default:n((()=>[v(s,{class:c("wui-tabs__map-arrow  "+(T.animating?"is-open":""))},{default:n((()=>[v(z,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),v(s,{class:"wui-tabs__map-header",style:o(`${T.mapShow?"":"display:none;"}  ${T.animating?"opacity:1;":""}`)},{default:n((()=>[h(x(g(N)("all")),1)])),_:1},8,["style"]),v(s,{class:c("wui-tabs__map-body  "+(T.animating?"is-open":"")),style:o(T.mapShow?"":"display:none")},{default:n((()=>[(l(!0),f(y,null,w(O.value,((e,t)=>(l(),i(s,{class:"wui-tabs__map-nav-item",key:t,onClick:a=>ea(t)},{default:n((()=>[v(s,{class:c(`wui-tabs__map-nav-btn ${T.activeIndex===t?"is-active":""}  ${e.disabled?"is-disabled":""}`),style:o(T.activeIndex===t?a.color?"color:"+a.color+";border-color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:n((()=>[h(x(e.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):d("",!0)])),_:1})])),_:1},8,["offset-top"]),v(s,{class:"wui-tabs__container",onTouchstart:sa,onTouchmove:ta,onTouchend:la,onTouchcancel:la},{default:n((()=>[v(s,{class:c(["wui-tabs__body",a.animated?"is-animated":""]),style:o(Q.value)},{default:n((()=>[u(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(s,{class:"wui-tabs__mask",style:o(`${T.mapShow?"":"display:none;"} ${T.animating?"opacity:1;":""}`),onClick:Y},null,8,["style"])])),_:3},8,["class","style"])])),_:3})):(l(),i(s,{key:1,class:c(`wui-tabs  ${a.customClass} ${a.slidableNum<O.value.length?"is-slide":""} ${a.mapNum<O.value.length&&0!==a.mapNum?"is-map":""}`)},{default:n((()=>[v(s,{class:"wui-tabs__nav"},{default:n((()=>[v(s,{class:"wui-tabs__nav--wrap"},{default:n((()=>[v(t,{"scroll-x":a.slidableNum<O.value.length,"scroll-with-animation":"","scroll-left":T.scrollLeft},{default:n((()=>[v(s,{class:"wui-tabs__nav-container"},{default:n((()=>[(l(!0),f(y,null,w(O.value,((e,t)=>(l(),i(s,{onClick:a=>ea(t),key:t,class:c(`wui-tabs__nav-item ${T.activeIndex===t?"is-active":""} ${e.disabled?"is-disabled":""}`),style:o(T.activeIndex===t?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:n((()=>[h(x(e.title),1)])),_:2},1032,["onClick","class","style"])))),128)),v(s,{class:"wui-tabs__line",style:o(T.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<O.value.length&&0!==a.mapNum?(l(),i(s,{key:0,class:"wui-tabs__map"},{default:n((()=>[v(s,{class:"wui-tabs__map-btn",onClick:Y},{default:n((()=>[v(s,{class:c("wui-tabs__map-arrow "+(T.animating?"is-open":""))},{default:n((()=>[v(z,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),v(s,{class:"wui-tabs__map-header",style:o(`${T.mapShow?"":"display:none;"}  ${T.animating?"opacity:1;":""}`)},{default:n((()=>[h(x(g(N)("all")),1)])),_:1},8,["style"]),v(s,{class:c("wui-tabs__map-body "+(T.animating?"is-open":"")),style:o(T.mapShow?"":"display:none")},{default:n((()=>[(l(!0),f(y,null,w(O.value,((a,e)=>(l(),i(s,{class:"wui-tabs__map-nav-item",key:e,onClick:a=>ea(e)},{default:n((()=>[v(s,{class:c(`wui-tabs__map-nav-btn ${T.activeIndex===e?"is-active":""}  ${a.disabled?"is-disabled":""}`)},{default:n((()=>[h(x(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):d("",!0)])),_:1}),v(s,{class:"wui-tabs__container",onTouchstart:sa,onTouchmove:ta,onTouchend:la,onTouchcancel:la},{default:n((()=>[v(s,{class:c(["wui-tabs__body",a.animated?"is-animated":""]),style:o(Q.value)},{default:n((()=>[u(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(s,{class:"wui-tabs__mask",style:o(`${T.mapShow?"":"display:none;"}  ${T.animating?"opacity:1":""}`),onClick:Y},null,8,["style"])])),_:3},8,["class"]))}}}),[["__scopeId","data-v-5098d282"]]);export{D as _,O as a};
