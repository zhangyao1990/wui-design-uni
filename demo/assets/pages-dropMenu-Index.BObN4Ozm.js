import{u as e,_ as l}from"./wui-message-box.B-SEOgW-.js";import{d as o,P as a,r as t,q as u,v as n,S as s,U as i,o as d,c as r,w as p,e as c,g as m,h as v,F as f,x as _,n as g,y as b,p as w,L as y,i as V,f as h,t as x,j as k,H as C,a as $,b as K,u as j,V as U}from"./index-Fj9ozFXB.js";import{f as z,m as I,i as S,l as T,N,g as M,k as O,E as B,w as F,t as H,b as P,I as Q,J as E,_ as G,a as L}from"./page-wraper.D4oaE4iN.js";import{p as q,r as A,q as D,c as J,u as R}from"./clickoutside.DlTcP0Ck.js";import{u as W}from"./useChildren.CNqwIpWf.js";import{_ as X}from"./demo-block.e8_LucGp.js";import{_ as Y}from"./wui-slider.DImWc72f.js";import{_ as Z}from"./wui-button.CIriDmop.js";import{w as ee}from"./wui-sort-button.pn9v0HpL.js";import"./wui-input.DTYlJiLR.js";import"./useTranslate.DD004H4V.js";import"./useTouch.BQUFjmn2.js";const le=Symbol("wui-drop-menu"),oe={...z,zIndex:I(12),direction:S("down"),modal:T(!0),closeOnClickModal:T(!0),duration:I(200)},ae=P(o({name:"wui-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...z,customTitle:S(""),customIcon:S(""),modelValue:[String,Number],options:N(),disabled:T(!1),iconName:S("check"),title:String,icon:S("arrow-down"),iconSize:S("14px"),beforeToggle:Function,valueKey:S("value"),labelKey:S("label"),tipKey:S("tip")},emits:["change","update:modelValue","open","opened","closed","close"],setup(e,{expose:l,emit:o}){const C=e,$=o,K=a(D,null),j=t(!1),U=t(!1),z=t(),I=t(12),S=t(!0),T=t(!0),N=t(0),{parent:P}=M(le),{proxy:Q}=y(),E=u((()=>{let e="";return e=j.value&&P?"down"===P.props.direction?`top: calc(var(--window-top) + ${P.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${P.offset.value}px)`:"",e}));function G(){U.value&&(B(C.beforeToggle)?C.beforeToggle({status:!1,resolve:e=>{e&&L()}}):L())}function L(){U.value&&(U.value=!1)}function J(){U.value||(B(C.beforeToggle)?C.beforeToggle({status:!0,resolve:e=>{e&&R()}}):R())}function R(){j.value=!0,U.value=!0,P&&(S.value=Boolean(P.props.modal),N.value=Number(P.props.duration),T.value=Boolean(P.props.closeOnClickModal),z.value="down"===P.props.direction?"top":"bottom"),$("open")}function W(){j.value=!1,$("closed")}function X(){$("open")}function Y(){$("opened")}function Z(){$("close")}return n((()=>C.modelValue),(e=>{H(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[wui-design] warning(wui-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),s((()=>{K&&K.pushToQueue?K.pushToQueue(Q):q(Q)})),i((()=>{K&&K.removeFromQueue?K.removeFromQueue(Q):A(Q)})),l({getShowPop:function(){return U.value},open:J,close:G,toggle:function(){U.value?G():J()}}),(e,l)=>{const o=k,a=V;return j.value?(d(),r(a,{key:0,class:g(`wui-drop-item  ${e.customClass}`),style:b(`z-index: ${I.value}; ${E.value};${e.customStyle}`)},{default:p((()=>[c(O,{modelValue:U.value,"onUpdate:modelValue":l[0]||(l[0]=e=>U.value=e),"z-index":I.value,duration:N.value,position:z.value,"custom-style":"position: absolute; max-height: 80%;","modal-style":"position: absolute;",modal:S.value,"close-on-click-modal":!1,onClickModal:l[1]||(l[1]=e=>T.value&&G()),onBeforeEnter:X,onAfterEnter:Y,onBeforeLeave:Z,onAfterLeave:W},{default:p((()=>[e.options.length?(d(),r(a,{key:0},{default:p((()=>[(d(!0),m(f,null,v(e.options,((l,t)=>(d(),r(a,{key:t,onClick:e=>function(e){if(C.disabled)return;const{valueKey:l}=C,o=C.options[e];$("update:modelValue",""!==o[l]&&void 0!==o[l]?o[l]:o),$("change",{value:""!==o[l]&&void 0!==o[l]?o[l]:o,selectedItem:o}),G()}(t),class:g("wui-drop-item__option "+((""!==l[e.valueKey]?l[e.valueKey]:l)===e.modelValue?"is-active":""))},{default:p((()=>[c(a,{class:g(`wui-drop-item__title ${e.customTitle}`)},{default:p((()=>[c(o,null,{default:p((()=>[h(x(l[e.labelKey]?l[e.labelKey]:l),1)])),_:2},1024),l[e.tipKey]?(d(),r(o,{key:0,class:"wui-drop-item__tip"},{default:p((()=>[h(x(l[e.tipKey]),1)])),_:2},1024)):w("",!0)])),_:2},1032,["class"]),(""!==l[e.valueKey]?l[e.valueKey]:l)===e.modelValue?(d(),r(F,{key:0,name:e.iconName,size:"20px",class:g(`wui-drop-item__icon ${e.customIcon}`)},null,8,["name","class"])):w("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):_(e.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","modal"])])),_:3},8,["class","style"])):w("",!0)}}}),[["__scopeId","data-v-cb1f39e7"]]),te=P(o({name:"wui-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:oe,setup(e){const l=e,o=a(D,null),u=t(`dropMenuId${Q()}`),i=t(0),w=t(0),{proxy:k}=y(),{linkChildren:z,children:I}=W(le);function S(e){e.preventDefault(),e.stopPropagation()}function T(e){const{title:l,modelValue:o,options:a,valueKey:t,labelKey:u}=e;if(l)return l;for(let n=0,s=a.length;n<s;n++)if(o===a[n][t])return a[n][u];console.error("[wui-design] warning(wui-drop-menu-item): no value is matched in the options option.")}function N(e){E(`#${u.value}`,!1,k).then((o=>{if(!o)return;const{top:a,bottom:t}=o;"down"===l.direction?i.value=Number(t):i.value=w.value-Number(a),e.$.exposed.toggle()}))}return z({props:l,fold:N,offset:i}),n((()=>l.direction),(e=>{["up","down"].includes(e)||console.error("[wui design] warning(wui-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),s((()=>{w.value=C().windowHeight})),(e,l)=>{const a=V,t=$(K("wui-icon"),F);return d(),r(a,{style:b(e.customStyle),class:g(`wui-drop-menu ${e.customClass}`),onClick:U(S,["stop"]),id:u.value},{default:p((()=>[c(a,{class:"wui-drop-menu__list"},{default:p((()=>[(d(!0),m(f,null,v(j(I),((e,l)=>(d(),r(a,{key:l,onClick:l=>function(e){e&&!e.disabled&&(o&&o.closeOther?o.closeOther(e):J(e),N(e))}(e),class:g(`wui-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:p((()=>[c(a,{class:"wui-drop-menu__item-title"},{default:p((()=>[c(a,{class:"wui-drop-menu__item-title-text"},{default:p((()=>[h(x(T(e)),1)])),_:2},1024),c(t,{name:e.icon,size:e.iconSize,"custom-class":"wui-drop-menu__arrow"},null,8,["name","size"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),_(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","id"])}}}),[["__scopeId","data-v-cfc38569"]]),ue=P(o({__name:"Index",setup(o){const{closeOutside:a}=R(),u=e(),n=t(),s=t(),i=t(30);t(!1);const m=t(1),v=t(0),f=t(0),_=t(0),g=t(0),b=t(0),w=t(0),y=t(0),x=t(0),k=t(0),C=t([{label:"全部商品",value:0},{label:"新款商品",value:1,tip:"这是补充信息"},{label:"这是比较长的筛选条件这是比较长的筛选条件",value:2}]),U=t([{label:"综合",value:0},{label:"销量",value:1},{label:"上架时间",value:2}]);function z(){var e;null==(e=s.value)||e.initSlider()}function I({value:e}){console.log(e)}function S({value:e}){console.log(e)}function T({value:e}){console.log(e)}function N({value:e}){console.log(e)}function M({value:e}){console.log(e)}function O({value:e}){console.log(e)}function B({value:e}){console.log(e)}function F({value:e}){console.log(e)}function H({value:e}){console.log(e)}function P(){n.value.close()}const Q=({status:e,resolve:l})=>{u.confirm({title:"异步"+(e?"打开":"关闭"),msg:`确定要${e?"打开":"关闭"}下拉菜单吗？`}).then((()=>{l(!0)})).catch((()=>{l(!1)}))};return(e,o)=>{const t=$(K("wui-message-box"),l),u=$(K("wui-drop-menu-item"),ae),E=$(K("wui-drop-menu"),te),q=$(K("demo-block"),X),A=$(K("wui-slider"),Y),D=$(K("wui-cell"),G),J=$(K("wui-button"),Z),R=V,W=$(K("wui-sort-button"),ee),le=$(K("page-wraper"),L);return d(),r(le,null,{default:p((()=>[c(t),c(R,{class:"demo-body",onClick:j(a)},{default:p((()=>[c(q,{title:"基本用法",transparent:""},{default:p((()=>[c(E,null,{default:p((()=>[c(u,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=e=>m.value=e),options:C.value,onChange:I},null,8,["modelValue","options"]),c(u,{modelValue:v.value,"onUpdate:modelValue":o[1]||(o[1]=e=>v.value=e),options:U.value,onChange:S},null,8,["modelValue","options"])])),_:1})])),_:1}),c(q,{title:"自定义菜单内容",transparent:""},{default:p((()=>[c(E,null,{default:p((()=>[c(u,{modelValue:f.value,"onUpdate:modelValue":o[2]||(o[2]=e=>f.value=e),options:C.value,onChange:T},null,8,["modelValue","options"]),c(u,{ref_key:"dropMenu",ref:n,title:"筛选",onOpened:z},{default:p((()=>[c(R,null,{default:p((()=>[c(A,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=e=>i.value=e),ref_key:"slider",ref:s},null,8,["modelValue"]),c(D,{title:"标题文字",value:"内容"}),c(D,{title:"标题文字",label:"描述信息",value:"内容"}),c(R,{style:{padding:"0 10px 20px","box-sizing":"border-box"}},{default:p((()=>[c(J,{block:"",size:"large",onClick:P},{default:p((()=>[h("主要按钮")])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1}),c(q,{title:"自定义菜单选项",transparent:""},{default:p((()=>[c(R,{class:"custom-menu"},{default:p((()=>[c(E,{"custom-style":"flex: 1; min-width: 0"},{default:p((()=>[c(u,{modelValue:_.value,"onUpdate:modelValue":o[4]||(o[4]=e=>_.value=e),options:C.value,onChange:N},null,8,["modelValue","options"])])),_:1}),c(R,{style:{flex:"1"}},{default:p((()=>[c(W,{modelValue:g.value,"onUpdate:modelValue":o[5]||(o[5]=e=>g.value=e),title:"上架时间",onChange:M},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),c(q,{title:"自定义菜单图标",transparent:""},{default:p((()=>[c(E,null,{default:p((()=>[c(u,{title:"地图",icon:"location","icon-size":"24px"})])),_:1})])),_:1}),c(q,{title:"异步打开/关闭",transparent:""},{default:p((()=>[c(E,null,{default:p((()=>[c(u,{modelValue:k.value,"onUpdate:modelValue":o[6]||(o[6]=e=>k.value=e),options:C.value,onChange:I,"before-toggle":Q},null,8,["modelValue","options"])])),_:1})])),_:1}),c(q,{title:"向上弹出",transparent:""},{default:p((()=>[c(E,{direction:"up"},{default:p((()=>[c(u,{modelValue:b.value,"onUpdate:modelValue":o[7]||(o[7]=e=>b.value=e),options:C.value,onChange:O},null,8,["modelValue","options"]),c(u,{modelValue:w.value,"onUpdate:modelValue":o[8]||(o[8]=e=>w.value=e),options:U.value,onChange:B},null,8,["modelValue","options"])])),_:1})])),_:1}),c(q,{title:"禁用",transparent:""},{default:p((()=>[c(E,{direction:"up"},{default:p((()=>[c(u,{modelValue:y.value,"onUpdate:modelValue":o[9]||(o[9]=e=>y.value=e),disabled:"",options:C.value,onChange:F},null,8,["modelValue","options"]),c(u,{modelValue:x.value,"onUpdate:modelValue":o[10]||(o[10]=e=>x.value=e),options:U.value,onChange:H},null,8,["modelValue","options"])])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-d089a9bb"]]);export{ue as default};
